# Техническое задание по стандарту IEEE 29148-2011

## Система для оценки стоимости сдачи квартир в аренду

## 1. Введение

### 1.1 Назначение

> Настоящее ТЗ описывает требования к разработке программного обеспечения (ПО), предназначенного для автоматической оценки рыночной стоимости аренды квартиры на основе анализа текстового описания квартиры, её адреса и инфраструктуры района, фотографий квартиры. Система позволяет арендодателю получить рекомендованную цену, прогнозировать изменение стоимости во времени, получить рекомендации по улучшению объявления. Документ предназначен для команды разработки, аналитиков данных, тестировщиков, менеджеров продукта.

### 1.2 Содержание (границы)

Продукт включает:

* создание и редактирование карточек квартир,

* анализ описания (NLP),

* анализ адреса и инфраструктуры,

* анализ изображений (CV),

* расчет рекомендованной цены,

* прогноз изменения стоимости (1–12 месяцев),

* формирование отчета для пользователя.

Вне области проекта:

* управление платежами и бронированием,

* юридическое оформление договоров аренды.

### 1.3 Обзор продукта

### 1.3.1 Взаимодействие продукта

> Внешние системы:Приложение взаимодействует с картографическими API (геокодирование, инфраструктура), внутренним ML-модулем: NLP-анализ текста, CV-анализ фотографий, модель расчета цены, прогноз изменения стоимости.
>
> Пользователи: Backend обрабатывает запросы от мобильного UI и взаимодействует с БД.

### 1.3.2 Функции продукта

- Загрузка и хранение карточки квартиры.
- Автоматический анализ текста, адреса и фото.
- Расчет рекомендованной цены аренды.
- Построение прогноза стоимости.
- Формирование отчета для пользователя.
- Предоставление рекомендаций по улучшению объявления.


### 1.3.3 Характеристики пользователей

- Арендодатели: Пользователи возраста от 20 до 70 лет, обладающие базовым уровнем цифровой грамотности, которые используют приложение для объективной оценки стоимости жилья.
- Администраторы:: Пользователи, обладающие технической квалификацией, которые осуществляют мониторинг работы системы и устраняют критические инциденты в работе сервера.
- Аналитики данных: Пользователи, работающие с  ML-моделями, оценивают корректность прогнозов.

### 1.3.4 Ограничения

- Точность оценки зависит от качества предоставленных данных.
- Максимум 20 изображений на одну карточку.
- Поддерживаются только форматы JPG/PNG, размер до 15 МБ.
- Прогнозы не имеют юридической силы.

### 1.4 Термины и определения

- Карточка квартиры — это комплекс данных о сдаваемом объекте недвижимости, включающий текстовое описание квартиры, её точный адрес и набор фотографий. Карточка является основной единицей данных, которую пользователь загружает в систему для последующего анализа и оценки стоимости аренды.
- NLP (Natural Language Processing) — обработка естественного языка. В контексте системы используется для анализа текстового описания квартиры: извлечение ключевых характеристик (количество комнат, площадь, наличие мебели, состояние ремонта) и условий аренды (например, запрет на животных или курение).
- CV (Computer Vision) — компьютерное зрение. Применяется для анализа изображений квартиры: определение типа помещений, состояния ремонта, наличия мебели и техники, а также общего качества фотографий.
- Рекомендованная цена — итоговая стоимость аренды квартиры, рассчитанная системой на основе анализа всех параметров: текстового описания, адреса и фотографий. Она отражает оптимальную рыночную цену, с которой вероятность быстрого съёма квартиры максимальна.
- Прогноз — расчетная динамика изменения арендной стоимости во времени (например, на горизонте 1, 3, 6 или 12 месяцев), учитывающая сезонность, рыночные тренды и изменения инфраструктуры района.
- Скоринг — числовая оценка какого-либо параметра квартиры или объявления (например, «Description Score», «Photo Score», «Location Score»), используемая для формирования итоговой рекомендованной цены.

## 2. Ссылки

* [IEEE 29148–2011 — Software Requirements Specification.](https://fenix.tecnico.ulisboa.pt/downloadFile/1411154454774055/IEEE%2029148-2011.pdf)
* [ISO/IEC 25010 — Software Quality Model.](https://iso25000.com/index.php/en/iso-25000-standards/iso-25010)
* [Документация ML-библиотек: Deeplearning4j (DL4J).](https://deeplearning4j.konduit.ai/)

## 3. Детальные требования

### 3.1 Требования к внешним интерфейсам

### 3.1.1 Пользовательский интерфейс

1. Форма загрузки карточки:

    * текстовое описание,

    * адрес,

    * фотографии.

1. Экран результата:

    * рекомендованная цена,

    * детализация факторов,

    * график прогноза.

1. Возможность повторной оценки.

### 3.1.2 API-интерфейсы
* POST /evaluate — анализ карточки.

* POST /predict — прогноз цены.

* GET /status — состояние сервера.

### 3.2 Функции продукта

- **FR-01. Загрузка карточки**
  - Назначение: предоставить пользователю возможность создать карточку квартиры, содержащую текстовое описание, адрес и визуальные материалы, которые будут использоваться для автоматического анализа и оценки стоимости.
  - Входные данные: Текстовое описание квартиры (до 5000 символов), адрес (строка),изображения (0–20 файлов): формат (JPG, JPEG, PNG), каждый фотофайл до 15 МБ,минимальное разрешение: 720p.
  - Выход: подтверждение сохранения - "Card successfully uploaded", присвоенный ID, cтатус валидации фото — OK/Warning/Error.
  - Ограничения: до 20 фотографий, только форматы JPG/JPEG/PNG, общий размер всех файлов до 150 МБ.
  - Ошибки: ошибка загрузки изображения (неверный формат), ошибка адреса (пустое поле),
превышен лимит файлов.

- **FR-02. NLP-анализ текста**
  - Назначение: автоматическое извлечение параметров квартиры и условий аренды из текстового описания.
  - Подфункции:
    1. Извлечение характеристик квартиры
        * площадь (кв. м);
        * количество комнат;
        * этаж/этажность;
        * состояние ремонта;
        * наличие мебели;
        * дополнительные возможности (балкон, лифт, кладовка).
    1. Выявление условий к арендаторам
        * можно/нельзя с животными;
        * можно/нельзя курить;
        * требования к долгосрочной аренде;
        * залог/депозит.
    1. Оценка качества описания (Description Score)*
        * полнота (есть/нет важные параметры);
        * читабельность текста;
        * наличие ошибок;
        * коммерческая привлекательность (тон и стиль текста).
  - Выход: JSON с параметрами квартиры, JSON с требованиями к арендаторам, Description Score (0–100).
  - Ошибки: текст слишком короткий (менее 7 слов), текст не содержит распознаваемых характеристик.

- **FR-03. Анализ адреса**
  - Назначение: вводим текстовый адрес и производится анализ и оценка района, доступность инфраструктуры и рыночного окружения.
  - Подфункции:
    1. Ввод адреса
        * определение района;
        * определение типа застройки.
    1. Инфраструктурный анализ
        * расстояние до станции метро;
        * близость остановок транспорта;
        * количество школ, магазинов, больниц в радиусе 1 км;
        * уровень транспортной загруженности;
        * рейтинг безопасности района (если доступен).
    1. Сравнение с аналогичными объявлениями
        * поиск объектов в радиусе 500–1500 м;
        * анализ их цен;
        * вычисление среднего, медианного и минимального значения;
        * определение рыночной разницы.
    - Выход: координаты, Location Score (0–100), список найденных объектов-аналогов,средняя стоимость по району.
    - Ошибки: адрес не найден, несколько возможных вариантов — нужно уточнение.

- **FR-04. Анализ изображений**
  - Назначение: провести анализ фотографий квартиры с помощью Computer Vision.
  - Подфункции:
    1. Классификация помещений на фото
        * гостиная / кухня / спальня / санузел / коридор / балкон;
        * внешние виды / подъезд / двор.
    1. Оценка состояния ремонта
        * без ремонта / косметический / хороший / евроремонт;
        * оценка износа мебели;
        * определение грязи/беспорядка.
    1. Определение наполненности мебели
        * кровати, диваны, столы, шкафы, бытовая техника;
        * автоматическая оценка комплектации.
    1. Оценка качества фотографий (Photo Score)
        Критерии:
        * освещенность;
        * шумы и артефакты;
        * резкость;
        * перспектива (искажения);
        * количество уникальных ракурсов.
  - Выход: комната каждого фото, качество фото (0–100), отчет о состоянии квартиры,
итоговый Photo Score (средний), список рекомендаций по улучшению фото.
  - Ошибки: поврежденный файл, фото слишком маленькое (< 256px).

- **FR-05. Расчет рекомендованной цены**
  - Назначение: определить оптимальную рыночную стоимость квартиры с использованием данных из FR-02–FR-04 и ML-модели.
  - Процесс:
    1. Сбор параметров: Description Score, Location Score, Photo Score.
    1. Формирование общего feature-vector.
    1. Прогон через ML-модель регрессии.
    1. Получение: рекомендуемой цены, нижней/верхней границы Price Range, Confidence Level (уверенность модели).
  - Выход: Recommended Price, Price Range (min–max), Confidence Level (низкий, средний, высокий).
  - Ошибки: недостаточно данных для оценки (нет фото/адреса).

- **FR-06. Прогноз изменения стоимости**
  - Назначение: предоставить прогноз динамики стоимости во времени.
  - Процесс:
    1. Анализ сезонности рынка.
    1. Получение исторических данных по району.
    1. Построение модели временных рядов (ARIMA, Prophet, LSTM).
    1. Вычисление стоимости на: 1 месяц, 3 месяца, 6 месяцев, 12 месяцев.
  - Выход: цены на указанную дату, тренд (рост/падение/стабильность), график.
  - Ошибки: недостаточно данных в районе для прогноза.

- **FR-07. Формирование рекомендаций**
  - Назначение: предоставить пользователю советы по улучшению объявления для увеличения стоимости или скорости аренды.
  - Подфункции:
    1. Рекомендации по тексту
        * добавить площадь/этаж/ремонт;
        * улучшить стиль и структуру текста;
        * убрать ошибки.
    1. Рекомендации по фото
        * добавить фото спальни/кухни;
        * заменить некачественные фото;
        * добавить дневное освещение.
    1. Рекомендации по условиям аренды
        * разрешить животных → может повысить спрос;
        * предложить скидку при долгосрочной аренде;
        * скорректировать депозит.
    1. Рекомендации по цене
        * поднять/опустить стоимость в зависимости от рынка;
        * указать более конкурентное значение.
  - Выход: cписок рекомендаций, отсортированных по приоритету, оценка возможного повышения спроса.


### 3.3 Требования к юзабилити

1. Время освоения интерфейса ≤30 секунд.
Пользователь должен быстро понять, где расположены основные функции: загрузка данных, запуск анализа и просмотр результатов. Интерфейс должен быть интуитивно понятным без необходимости изучать инструкции, используя знакомые паттерны — крупные кнопки, подсказки и логичную структуру экранов.

1. Адаптивный дизайн для мобильных устройств.
Система должна корректно отображаться на экранах смартфонов и планшетов. Элементы интерфейса должны масштабироваться и перестраиваться: кнопки — увеличиваться для тач-нажатий, блоки — переходить в вертикальную компоновку, графики — адаптироваться под малую ширину. Пользователь должен иметь одинаково удобный доступ к функционалу как на ПК, так и на мобильном устройстве.

### 3.4 Требования к производительности

1. Время анализа одной карточки ≤ 5 секунд.
Система должна обеспечивать быстрое вычисление стоимости квартиры, включая обработку текста, изображений и адреса. Обработка не должна создавать заметных задержек — пользователь должен сразу получать результат после загрузки данных.

1. Поддержка одновременной работы ≥ 500 пользователей.
Приложение должно корректно функционировать при высокой нагрузке, обеспечивая стабильную скорость анализа независимо от количества активных пользователей. Масштабируемость должна обеспечиваться за счёт асинхронной обработки и распределения нагрузки.

1. Время отклика интерфейса ≤ 100 мс.
Все основные действия (открытие страниц, переключение вкладок, отображение графиков и рекомендаций) должны выполняться практически мгновенно. Интерфейс не должен "подвисать" при подсчётах — вычисления должны выполняться в фоновых потоках.

1. Загрузка фото ≥ 20 изображений без задержек.
При массовой загрузке изображений пользователь не должен наблюдать фризов или долгой обработки на клиентской стороне. Предусматривается локальная оптимизация изображений перед отправкой.

1. Оптимизация вычислений модели.
Модули NLP, CV и анализа адреса должны использовать предварительно оптимизированные встроенные модели (квантование, ускоренная инференс-библиотека), чтобы обеспечить высокую скорость без потери точности.

### 3.5 Требования к логической структуре БД

База данных должна обеспечивать хранение всех данных, связанных с карточками квартир, результатами анализа и расчётом стоимости. Для работы системы требуется реляционная БД (PostgreSQL) с нормализованной структурой (не ниже 3НФ) и поддержкой индексации по ключевым полям.

Основные сущности и их назначение:
1. ApartmentListing
    Хранит базовые данные карточки: идентификатор, адрес, описание, дата создания, пользователь. Индексация по адресу и дате добавления.
1. NLPFeatures
    Содержит извлечённые из описания структурированные характеристики: количество комнат, мебель, состояние, ограничения, размещение и т.д. Ссылка на ApartmentListing по внешнему ключу.
1. LocationScore
    Хранит данные об инфраструктуре, транспортной доступности, безопасности района, а также итоговый гео-скоринг. Содержит координаты и метрики (метро, школы, больницы, магазины).
1. ImageFeatures
    Содержит результаты анализа изображений: качество ремонта, наличие мебели, классификация комнаты, эстетическая оценка. Одна запись на одно изображение.
1. PriceEstimation
    Итоговая оценка стоимости: рекомендованная цена, диапазон цен, confidence score, список факторов влияния. Хранит ссылки на данные анализа.
1. PriceForecast
    Прогноз цены на 1–12 месяцев вперёд. Хранит массив или серию точек прогноза.

Дополнительные требования:
* Поддержка транзакционности (ACID).
* Поддержка миграций структуры БД.
* Индексация полей, участвующих в поиске и фильтрации.
* Хранение изображений в БД в BLOB-формате.
* Возможность архивирования старых данных без нарушения связей.

### 3.6 Ограничения проектирования

> Архитектура системы должна быть модульной или микросервисной, чтобы обеспечить независимое развитие и обновление компонентов анализа текста, изображений и адреса.

> ML-модули (NLP, CV, модель оценки цены, модель прогноза) должны быть изолированы от основной логики приложения и вызываться через внутренние API или сервисы, что позволяет обновлять модели без остановки всей системы.

> Для развёртывания необходимо использование контейнеризации (Docker) и оркестрации (Docker Compose / Kubernetes) для обеспечения предсказуемости среды и масштабируемости.

> Хранение данных должно учитывать требования к конфиденциальности и ограничивать доступ к пользовательским фотографиям и адресам.

> Интерфейсы между сервисами должны быть стандартизированы (REST/JSON), чтобы упростить интеграцию и поддержку.

> Внешние зависимости (картографические сервисы, библиотеки моделей) должны иметь резервные альтернативы или fallback-механизмы на случай недоступности основного поставщика.

### 3.7 Системные свойства ПО

- Надежность: Система должна обеспечивать стабильную работу при стандартных нагрузках и при кратковременном росте интенсивности запросов. В случае сбоя отдельного микросервиса остальные компоненты должны продолжать функционировать (изоляция отказов). Все критичные операции должны сопровождаться механизмами повторного выполнения (retry) и журнального восстановления.
- Безопасность: Все сетевые взаимодействия осуществляются по HTTPS. Данные пользователей (описания, адреса, изображения) должны храниться в защищённой среде с ограниченным доступом. Должны использоваться механизмы аутентификации и контроля ролей (роль «Пользователь», «Администратор»).
- Масштабируемость: Система должна поддерживать горизонтальное масштабирование backend-сервисов и ML-модулей. Обработка изображений и ML-инференс должна быть параллелизуема.
- Сопровождаемость: Архитектура должна быть модульной и легко расширяемой. Код должен быть документирован и соответствовать внутренним coding guidelines. Обновления ML-модулей не должны требовать остановки основной системы.
- Переносимость: Приложение может разворачиваться в Docker-контейнерах и на разных облачных платформах. Зависимости должны быть минимизированы и зафиксированы в конфигурации.

### 3.8 Дополнительные требования

> Дополнительные требования отсутствуют.

## 4. Тестирование и проверка

**AT-01. Загрузка карточки**

* Проверка текста, адреса, фото.

* Ограничения по формату и размеру.

**AT-02. NLP-анализ**

* Корректность извлечения параметров.

* Обработка ошибок.

**AT-03. Анализ адреса**

* Геокодирование и инфраструктура.

* Сравнение с аналогами.

**AT-04. Анализ изображений**

* Определение качества квартиры.

* Обработка невалидных фото.

**AT-05. Расчет цены**

* Проверка диапазона цены и факторов.

**AT-06. Прогноз стоимости**

* Построение графика.

* Проверка корректности API.

**AT-07. Рекомендации**

* Проверка корректности предложений пользователю.

## 5. Приложения

### 5.1 Предположения и зависимости

> Доступность сторонних картографических сервисов
Предполагается стабильная работа API геокодирования и сервисов инфраструктурного анализа (например, Google Maps, Yandex Maps). Ограничения их сторонних квот, лимитов и возможные изменения тарифов могут влиять на функциональность системы.

> Корректность данных, вводимых пользователями
Пользователь предоставляет достоверные текстовые описания, корректные адреса и качественные фотографии. Система не отвечает за точность анализа при предоставлении искажённых или неполных данных.

> Работоспособность и актуальность ML-моделей
Предполагается, что обученные модели NLP, CV и ценообразования поддерживаются в актуальном состоянии, периодически обновляются и имеют необходимую инфраструктуру (GPU/CPU) для выполнения анализа.

> Доступность серверной инфраструктуры
Система функционирует при наличии стабильного интернет-соединения, работающих серверов, базы данных и хранилища изображений.

> Стабильная работа сторонних библиотек и фреймворков
ПО зависит от внешних библиотек (ML-фреймворков, веб-фреймворков, драйверов БД). Их поддержка и совместимость должны быть сохранены.


### 5.2 Аббревиатуры и сокращений

- API -- Application Programming Interface.
- UI -- User Interface.
- ML -- Machine Learning.
- NLP -- Natural Language Processing.
- CV -- Computer Vision.
- DB -- Database.